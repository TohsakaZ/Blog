## 周跳探测代码相关记录

### 实时周跳探测部分

实时周跳探测算法的核心部分都在t_gexeturboedit这个类中。

##### 需要区分的几个类：

* t_gturboedit类是存储周跳探测结果的log文件信息及相应周跳判断算法的类，一般用于后处理过程中。
* t_gexeturboedit类主要是周跳探测算法的处理类，包含了用于处理事后和实时两部分的算法。
* 至于GNSS算法中周跳判断新增模糊度参数的判断则来源于obs的lli（来源于实时周跳处理结果）或者是t_gturboedit中存储的flag信息（来源于后处理得到的log文件）
* t_gallambflag和t_gambflag是直接对log文件数据的映射，是log文件读写存储的数据结构，最底层的数据结构

##### 实时周跳探测算法流程：

* 每个测站的周跳独立，对应一个t_gexeturboedit的类示例运行

* 核心算法流程 在_realtimeMWGF_new函数中，核心思路就是通过MW组合和GF组合来判断周跳
  * 这里每次循环判断单个测站-卫星对的观测值（包含不同频率的伪距、相位观测值等）
  * 对每个双频观测值而言，依次判断下面四个条件（能进循环说明双频观测值一定存在）
    * 之前该频段的观测值不存在（如第一个历元，或者某个观测通道的选择发生改变，如L1C->L1W），需要重置模糊度
    * 和之前存在的观测值时间间隔较长且MW差值较大，需要重置模糊度计算
    * GF和MW组合判断差值过大，需要重置模糊度**（但为什么这里的重置仅仅添加了lli标志没有把其他的标志重置，如vector清空，mwslip/gfslip的标志改为false)**

##### 实时周跳探测相关的一些设置项：

gf_litmit 单位：meter

mw_limit 单位：cycles

smooth_win 单位：历元数

一些待测试的改进措施效果确认

* [ ] gf_limit 和 mw_limit的阈值设定

  >  windows上测试 90个站 15个星
  >
  > Linux上 为rtpod下的2020106的ALL G以及120个站 

  * 默认阈值 gf_limit:1 smooth_win: 25

* [ ] 修改隔一个历元才重置tb里面统计信息的做法

* [ ] 修改在进行粗差检测判定后，重置tb里面MW组合的做法





